<?xml version="1.0" encoding="utf-8"?>
<ddi:DDIInstance versionDate="<%= DateTime.now %>" xmlns:d="ddi:datacollection:3_2" xmlns:ddi="ddi:instance:3_2" xmlns:g="ddi:group:3_2" xmlns:l="ddi:logicalproduct:3_2" xmlns:r="ddi:reusable:3_2">
	<r:URN>urn:ddi:<%= @instance.agency %>:<%= @instance.instance %>:<%= @instance.version %></r:URN>
	<r:Citation>
		<r:Title><r:String xml:lang="en-GB"><%= @output_option %></r:String></r:Title>
	</r:Citation>
	<g:ResourcePackage versionDate="<%= DateTime.now %>">
		<r:URN>urn:ddi:<%= @instance.agency %>:<%= @instance.resource_package %>:<%= @instance.version %></r:URN>
		<r:Citation>
			<r:Title><r:String xml:lang="en-GB"><%= @instance.rp_citation %></r:String></r:Title>
		</r:Citation>
		<r:Purpose id="<%= @instance.purpose %>">
			<r:Content xml:lang="en-GB"><%= @instance.purpose_text %></r:Content>
		</r:Purpose>
		<d:DataCollection versionDate="<%= DateTime.now %>">
			<r:URN>urn:ddi:<%= @instance.agency %>:<%= @instance.ddata_collection %>:<%= @instance.version %></r:URN>

                        <d:ControlConstructScheme>
				<r:URN>urn:ddi:<%= @instance.agency %>:<%= @instance.cc_scheme %>:<%= @instance.version %></r:URN>
			    	<d:ControlConstructSchemeName><r:String xml:lang="en-GB"><%= @instance.cc_scheme %></r:String></d:ControlConstructSchemeName>
			      	<%= render :partial => 'cc_alls/xml_construct',  :locals => {:xmlconstruct => @first_construct, :instance => @instance}  %>
                        </d:ControlConstructScheme>

                        <d:InstrumentScheme>
				<r:URN>urn:ddi:<%= @instance.agency %>:<%#= @instance.instrument_scheme %>:<%= @instance.version %></r:URN>
			    	<d:InstrumentSchemeName><r:String xml:lang="en-GB"><%#= @instance.instrument_scheme %></r:String></d:InstrumentSchemeName>
                        	<d:Instrument>
					<r:URN>urn:ddi:<%= @instance.agency %>:<%= @instance.instrument %>:<%= @instance.version %></r:URN>
			    		<d:InstrumentName><r:String xml:lang="en-GB"><%= @instance.instrument %></r:String></d:InstrumentName>
			    		<d:ControlConstructReference>
						<r:URN>urn:ddi:<%= @instance.agency %>:1:<%= @instance.version %></r:URN>
						<r:TypeOfObject>Sequence</r:TypeOfObject>
			    		</d:ControlConstructReference>
			  	</d:Instrument>
                        </d:InstrumentScheme>

                </d:DataCollection>
		
	<%= render :partial => 'question_items/list',  :locals => {:question_items => @question_items, :instance => @instance}  %>
	<%= render :partial => 'question_grids/list',  :locals => {:question_grids => @question_grids, :instance => @instance}  %>
	<%= render :partial => 'instructions/list',  :locals => {:instructions => @instructions, :instance => @instance}  %>
	<%= render :partial => 'categories/list',  :locals => {:categories =>  @categories, :instance => @instance}  %>
	<%= render :partial => 'code_schemes/list',  :locals => {:code_schemes => @code_schemes, :instance => @instance}  %>
	<%= render :partial => 'response_domain_texts/list',  :locals => {:response_domain_texts => @response_domain_texts, :instance => @instance}  %>
	<%= render :partial => 'response_domain_numerics/list',  :locals => {:response_domain_numerics => @response_domain_numerics, :instance => @instance}  %>
	<%= render :partial => 'response_domain_datetimes/list',  :locals => {:response_domain_datetimes => @response_domain_datetimes, :instance => @instance}  %>
	</g:ResourcePackage>
</ddi:DDIInstance>
